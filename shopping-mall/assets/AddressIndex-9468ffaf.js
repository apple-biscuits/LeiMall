import{d as x,R as D,ai as N,r as S,E as n,e as a,N as b,F as s,O as B,P as F,D as r,I as c,Q as L,al as h,K as R,M as V,J as $,aQ as q,a6 as m}from"./index-ce5e170b.js";import{N as z,_ as E}from"./index-95dee2f0.js";import{a as M,d as Q}from"./address-975c59b9.js";import{u as U}from"./user-638b6ecb.js";const j=o=>(R("data-v-2dd92510"),o=o(),V(),o),J={class:"address-page"},K={class:"address-list"},O=["onClick"],P={class:"details"},T={key:0},G={class:"receiver"},H={class:"phone"},W=["onClick"],X=["onClick"],Y={class:"add-address"},Z=j(()=>s("span",null,"添加收货地址",-1)),ss=x({__name:"AddressIndex",setup(o){const _=U(),i=D(),v=N(),{shopId:I}=v.query,f=()=>{history.back()},k=()=>{i.push("/address/edit")},l=S([]),p=async()=>{try{l.value=await M(_.userInfo.userId)}catch(t){l.value=[]}};p();const g=t=>{i.push("/address/edit?addressId="+t)},y=t=>{q({title:"提示",message:"确定要删除吗？"}).then(async()=>{try{await Q(_.userInfo.userId,t),m({title:"提示",message:"删除成功"}).then(()=>{p()})}catch(A){m({title:"提示",message:"删除成失败"}).then(()=>{})}}).catch(()=>{})},C=t=>{setTimeout(()=>{i.replace({name:"orderComfirmation",params:{shopId:Number(I)},query:{addressId:t}})},10),history.back()};return(t,A)=>{const d=$,w=z;return r(),n("div",J,[a(w,{title:"选择收货地址","left-arrow":"",onClickLeft:f},{right:b(()=>[a(d,{name:"ellipsis",color:"#000",size:"30"})]),_:1}),s("div",K,[(r(!0),n(B,null,F(l.value,e=>(r(),n("div",{class:"item",key:e.addressId,onClick:u=>C(Number(e.addressId))},[s("div",P,[s("p",null,c(e.area.split("/").join("")+e.detailsAddress),1),e.isDefault?(r(),n("span",T,c(e.isDefault?"默认":""),1)):L("",!0)]),s("div",G,[s("span",null,c(e.receiver),1),s("span",H,c(e.phone),1),s("span",{class:"delete",onClick:h(u=>y(e.addressId),["stop"])},[a(d,{name:"delete-o"})],8,W),s("span",{class:"edit",onClick:h(u=>g(e.addressId),["stop"])},[a(d,{name:"edit"})],8,X)])],8,O))),128))]),s("div",Y,[s("div",{class:"button",onClick:k},[a(d,{name:"plus",size:"4.26vw",color:"#FF445B"}),Z])])])}}});const ds=E(ss,[["__scopeId","data-v-2dd92510"]]);export{ds as default};
