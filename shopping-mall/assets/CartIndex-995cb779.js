import{c as X,d as B,r as N,q as Y,s as U,a as w,_ as V,b as Z,$ as ee,j as te,e as i,m as oe,v as A,k as se,x as ae,a0 as ne,a1 as ce,g as re,Y as le,D as n,E as b,F as m,W as y,V as k,N as v,H as G,I as ie,O as H,P as O,J as F,a2 as de,R as ue,Q as T,K as _e,M as me}from"./index-ce5e170b.js";/* empty css              */import{_ as M,N as fe}from"./index-95dee2f0.js";import{u as q}from"./useAddCartAnimation-c55e2ead.js";import{G as pe}from"./GoodsItem-2978180d.js";import{O as he}from"./OrderPayControl-b0443ff0.js";import{I as ve}from"./IsNull-235fb164.js";import{S as ge}from"./index-8c74fe71.js";import"./user-638b6ecb.js";const[ke,x]=X("swipe-cell"),Ce={name:oe(""),disabled:Boolean,leftWidth:A,rightWidth:A,beforeClose:Function,stopPropagation:Boolean};var ye=B({name:ke,props:Ce,emits:["open","close","click"],setup(o,{emit:f,slots:r}){let a,d,g,t;const l=N(),_=N(),C=N(),s=Y({offset:0,dragging:!1}),p=U(),c=e=>e.value?se(e).width:0,I=w(()=>V(o.leftWidth)?+o.leftWidth:c(_)),P=w(()=>V(o.rightWidth)?+o.rightWidth:c(C)),z=e=>{s.offset=e==="left"?I.value:-P.value,a||(a=!0,f("open",{name:o.name,position:e}))},S=e=>{s.offset=0,a&&(a=!1,f("close",{name:o.name,position:e}))},j=e=>{const u=Math.abs(s.offset),h=.15,Q=a?1-h:h,D=e==="left"?I.value:P.value;D&&u>D*Q?z(e):S(e)},J=e=>{o.disabled||(g=s.offset,p.start(e))},K=e=>{if(o.disabled)return;const{deltaX:u}=p;p.move(e),p.isHorizontal()&&(d=!0,s.dragging=!0,(!a||u.value*g<0)&&ae(e,o.stopPropagation),s.offset=ne(u.value+g,-P.value,I.value))},R=()=>{s.dragging&&(s.dragging=!1,j(s.offset>0?"left":"right"),setTimeout(()=>{d=!1},0))},W=(e="outside")=>{t||(f("click",e),a&&!d&&(t=!0,ce(o.beforeClose,{args:[{name:o.name,position:e}],done:()=>{t=!1,S(e)},canceled:()=>t=!1,error:()=>t=!1})))},E=(e,u)=>h=>{u&&h.stopPropagation(),W(e)},L=(e,u)=>{const h=r[e];if(h)return i("div",{ref:u,class:x(e),onClick:E(e,!0)},[h()])};return Z({open:z,close:S}),ee(l,()=>W("outside"),{eventName:"touchstart"}),te("touchmove",K,{target:l}),()=>{var e;const u={transform:"translate3d(".concat(s.offset,"px, 0, 0)"),transitionDuration:s.dragging?"0s":".6s"};return i("div",{ref:l,class:x(),onClick:E("cell",d),onTouchstartPassive:J,onTouchend:R,onTouchcancel:R},[i("div",{class:x("wrapper"),style:u},[L("left",_),(e=r.default)==null?void 0:e.call(r),L("right",C)])])}}});const be=re(ye);const Ie={class:"cart-item"},we={class:"cart-item__top"},Pe={class:"title common-ellipsis"},Se={class:"arrow"},Ne={class:"card"},Te=["onClick"],xe=B({__name:"CartItem",props:{data:{}},setup(o){const f=o,r=q(),a=(t,l)=>{r.toggleChecked(t,l)},d=w(()=>r.isAllChecked(Number(f.data[0]))),g=(t,l)=>{r.deleteGoodsToCartById(t,l)};return(t,l)=>{const _=F,C=le("RouterLink"),s=de,p=be;return n(),b("div",Ie,[m("div",we,[m("div",{class:"all-checked",onClick:l[0]||(l[0]=c=>y(r).toggleAllChecked(Number(t.data[0])))},[d.value?(n(),k(_,{key:0,name:"checked",size:"4.26vw",color:"var(--theme-color-important)"})):(n(),k(_,{key:1,name:"circle",size:"4.26vw"}))]),m("div",Pe,[i(C,{to:"shop/"+t.data[0]},{default:v(()=>[G(ie(t.data[1].shopName),1)]),_:1},8,["to"])]),m("span",Se,[i(_,{name:"arrow",size:"4.26vw"})])]),(n(!0),b(H,null,O(t.data[1].goodsList,c=>(n(),b("div",{class:"cart-item__main",key:c.goodsId},[i(p,null,{right:v(()=>[i(s,{square:"",text:"删除",type:"danger",class:"delete-button",onClick:I=>g(t.data[0],c.goodsId)},null,8,["onClick"])]),default:v(()=>[m("div",Ne,[m("div",{class:"check-button",onClick:I=>a(Number(t.data[0]),c.goodsId)},[c.checked?(n(),k(_,{key:0,name:"checked",size:"4.26vw",color:"var(--theme-color-important)"})):(n(),k(_,{key:1,name:"circle",size:"4.26vw"}))],8,Te),i(pe,{"shop-id":t.data[0],"shop-name":t.data[1].shopName,goods:c,"margin-bottom":0,style:{paddingRight:"12px"}},null,8,["shop-id","shop-name","goods"])])]),_:2},1024)]))),128))])}}});const Be=M(xe,[["__scopeId","data-v-c131bd3e"]]),$e="/assets/cart-is-null-13df2456.png",$=o=>(_e("data-v-e3e11cb0"),o=o(),me(),o),ze={class:"cart-page"},Re={key:0,class:"cart-page__main"},We=$(()=>m("span",null,"您还没有购物记录 ",-1)),Ee=$(()=>m("span",null,"快去选择喜欢的商品吧",-1)),Le=$(()=>m("div",{class:"history-order"},"历史订单",-1)),De=B({__name:"CartIndex",setup(o){const f=ue(),r=q(),a=r.getCartList(),d=w(()=>r.getAllCheckedGoodsPrice()),g=()=>{f.push("/order/comfirmation")},t=()=>{f.push("/")};return(l,_)=>{const C=F,s=fe,p=ge;return n(),b("div",ze,[i(p,{"offset-top":0},{default:v(()=>[i(s,{title:"购物车"},{right:v(()=>[i(C,{name:"ellipsis",color:"#000",size:"30"})]),_:1})]),_:1}),y(a).size?(n(),b("div",Re,[(n(!0),b(H,null,O(y(a),c=>(n(),k(Be,{key:c[0],data:c},null,8,["data"]))),128))])):T("",!0),y(a).size?(n(),k(he,{key:1,totalPrice:d.value.nowPriceTotal,show:!0,preferentialPrice:d.value.oldPriceTotal-d.value.nowPriceTotal,bottom:"50px",onSubmit:g},{default:v(()=>[G(" 结算 ")]),_:1},8,["totalPrice","preferentialPrice"])):T("",!0),y(a).size?T("",!0):(n(),k(ve,{key:2,"img-src":y($e),width:"295px",height:"182px",onSubmit:t},{bottom:v(()=>[Le]),default:v(()=>[We,Ee]),_:1},8,["img-src"]))])}}});const Je=M(De,[["__scopeId","data-v-e3e11cb0"]]);export{Je as default};
