import{S as V,d as w,ai as U,r as f,a as E,E as l,e,N as _,F as s,I as a,O as y,P as C,H as b,W as k,V as x,D as n,Z as L,J as $}from"./index-ce5e170b.js";/* empty css              *//* empty css              */import{_ as N,N as z}from"./index-95dee2f0.js";import{A as H}from"./GoodsItem-2978180d.js";import{S as J}from"./ShopingCart-e303fb5e.js";import{u as O}from"./useAddCartAnimation-c55e2ead.js";import{S as R}from"./index-8c74fe71.js";import{b as W,T as Z}from"./index-02a73e3e.js";import"./user-638b6ecb.js";import"./use-id-119f5b86.js";function j(u,i){return V.get("/goods/details",{params:{shopId:u,goodsId:i}})}const q={};function K(u,i){return".....无内容"}const m=N(q,[["render",K]]),M={class:"goods-details-page"},Q={class:"goods-details-page__top"},X=["src"],Y={class:"title"},oo={class:"infos"},so={class:"discount"},to={class:"score"},eo={class:"sales"},ao={class:"price-or-button"},no={class:"price"},co={class:"add-button"},io={class:"goods-details-page__main"},lo=w({__name:"GoodsIndex",setup(u){const i=O(),I=U(),{shopId:r,goodsId:v}=I.params,D=[{id:1,title:"商品",component:m},{id:2,title:"详情",component:m},{id:3,title:"评价",component:m}],g=f(0),o=f({shopId:0,shopName:"xx",goods:{goodsId:"",name:"",imgUrl:"",sellCount:0,rating:"",price:0,oldPrice:0,tips:[""],discount:{type:0,value:0,limitCount:0},cartCount:0,checked:!1}});(async()=>{try{o.value=await j(Number(r),v)}catch(p){o.value={}}})();const h=E(()=>i.getGoodsCartCount(Number(r),v));console.log(h.value);const G=(p,c,d)=>{console.log("sss"),i.pushProductToCart(p,c,d)},S=()=>{history.back()};return(p,c)=>{const d=$,B=z,F=R,T=Z,A=W;return n(),l("div",M,[e(F,{"offset-top":0},{default:_(()=>[e(B,{title:"商品详情","left-arrow":"",onClickLeft:S},{right:_(()=>[e(d,{name:"ellipsis",color:"#000",size:"30"})]),_:1})]),_:1}),s("div",Q,[s("img",{src:o.value.goods.imgUrl,class:"goods-img"},null,8,X),s("div",Y,a(o.value.goods.name),1),s("div",oo,[(n(!0),l(y,null,C(o.value.goods.tips,(t,P)=>(n(),l("span",{class:"tags",key:P},a(t),1))),128)),s("span",so,a(o.value.goods.discount.value)+" 折 限"+a(o.value.goods.discount.limitCount)+"份",1),e(d,{name:"star",color:"#FFAF0F"}),s("span",to,[b("评分 "),s("i",null,a(o.value.goods.rating),1)])]),s("div",eo,"月售："+a(o.value.goods.sellCount),1),s("div",ao,[s("div",no,[s("span",null,"￥ "+a(o.value.goods.price),1),s("del",null,"￥ "+a(o.value.goods.oldPrice),1)]),s("div",co,[h.value===0?(n(),l("div",{key:0,class:"add",onClick:c[0]||(c[0]=t=>G(Number(k(r)),o.value.shopName,o.value.goods))},[e(d,{name:"plus"}),b(" 加入购物车 ")])):(n(),x(H,{key:1,"shop-id":Number(k(r)),goods:o.value.goods,"shop-name":o.value.shopName},null,8,["shop-id","goods","shop-name"]))])])]),s("div",io,[e(A,{active:g.value,"onUpdate:active":c[1]||(c[1]=t=>g.value=t),sticky:""},{default:_(()=>[(n(),l(y,null,C(D,t=>e(T,{title:t.title,key:t.id},{default:_(()=>[(n(),x(L(t.component)))]),_:2},1032,["title"])),64))]),_:1},8,["active"])]),e(J,{"shop-id":1})])}}});const ko=N(lo,[["__scopeId","data-v-7031a264"]]);export{ko as default};
